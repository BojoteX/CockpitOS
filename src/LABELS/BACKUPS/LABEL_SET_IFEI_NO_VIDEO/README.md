# DCSBIOS Panel Code Generator

This auto-generates the C/C++ data files needed for your custom DCS BIOS cockpit firmware, based on a user-selectable set of panels.

## How it Works

1. **Panel Definition Extraction**
   - On each run, the script automatically scans your directory for a single valid DCS BIOS panel JSON file (e.g., `FA-18C_hornet.json`).
   - It generates an up-to-date `panels.txt` file listing all panels available in the JSON.

2. **Selecting Panels**
   - The panels you wish to include for your firmware build are controlled via `selected_panels.txt`.
   - If this file doesn't exist (first run), the script will create it as a template with all available panels commented out and instructions at the top.

3. **Panel Selection Workflow**
   - Open `selected_panels.txt` in any text editor.
   - Uncomment (remove the leading `#`) any panels you want to include in your firmware build.
   - Save and close the file, then re-run the script.
   - The script checks that all selected panels exist in `panels.txt` and will error out if you make a typo or select an invalid name.

4. **File Generation**
   - Once the selection passes validation, the script generates all required C/C++ mapping and lookup header files for your firmware (`DCSBIOSBridgeData.h`, `InputMapping.h`, `LEDMapping.h`, etc).

5. **All-Panels Mode**
   - If you want to build firmware for **every panel** in the JSON (for dev or performance testing), set `PROCESS_ALL = True` at the top of the script. This ignores `selected_panels.txt` and includes everything.
   - **WARNING:** This mode is only recommended for development or benchmarking—firmware will contain everything, not just your selected panels.

## Quick Start

1. **Place your aircraft JSON (e.g., `FA-18C_hornet.json`) in the same folder as the script.**
2. Run the script:
    ```bash
    python3 your_script.py
    ```
3. On the first run:
    - `panels.txt` is auto-generated from your JSON.
    - `selected_panels.txt` is created as a template; open it and uncomment the panels you want.
4. Re-run the script after editing `selected_panels.txt`.
5. If successful, the script generates all needed header/source files.
6. Use these generated files in your firmware build.

## Notes

- **Do not manually edit `panels.txt`** — it is auto-generated from the JSON every run.
- **Do not add or remove entries in `selected_panels.txt` that do not exist in `panels.txt`.**
- To update the list of available panels (e.g., after updating your JSON), simply re-run the script.
- If you see any error about missing or duplicate JSON files, or about invalid panel selection, fix as directed and re-run.
- All files will be generated or updated automatically each time the script runs.

## Troubleshooting

- **First Run:**  
  If you see a warning about `selected_panels.txt` not existing, that’s normal. Edit the new file and re-run.
- **Invalid Panel Error:**  
  Double-check spelling and panel names—must match those in `panels.txt`.
- **Multiple JSON Error:**  
  Remove or relocate extra `.json` files in your script directory so only your intended aircraft JSON remains.

## Implementation

- Done creating your custom panel? now create a directory inside LABELS (e.g CUSTOM-123) and inside it, all the files that were autogenerated. To point your firmware to use that set you simply need too update the Mappings.h header inside src, compile and you should be all set. Remember to update Config.h to reflect what panels are actually active. 

---

**Questions or issues?**  
Open an issue or ping the maintainer!


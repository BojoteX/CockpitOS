# CockpitOS LABEL SETS and Auto-Generation

This directory controls **which panels and controls are compiled into your CockpitController firmware** for a specific aircraft, instrument set, or cockpit build. Each LABEL SET is an independent configuration under `LABELS/`, enabling multiple, hardware-specific or aircraft-specific firmware targets.

---

## Directory Structure

- `LABELS/`
    - `LABEL_SET_MAIN/`
        - `selected_panels.txt`
        - (all auto-generated mapping files for this label set)
    - `LABEL_SET_ALR67/`
    - `LABEL_SET_ALL/`
    - *(etc; each set is a subdirectory)*

- Top-level aircraft JSON (e.g., `FA-18C_hornet.json`): Source of truth for all labels, addresses, and definitions.

---

## How LABEL SETS Work

- Each **LABEL_SET_XXXX** directory defines a configuration for a specific build. (e.g., `LABEL_SET_MAIN`, `LABEL_SET_ALR67`)
- **Switch sets** by changing the `#define LABEL_SET_XXXX` in your `Config.h`.

- *Each label set includes:*
    - `selected_panels.txt` &nbsp;â†’ List of panels to include (edit this to customize your build)
    - Auto-generated:  
        - `InputMapping.h`, `LEDMapping.h`, `DCSBIOSBridgeData.h`, `DisplayMapping.h/cpp`, `CT_Display.h/cpp`  
        - These are generated by running the Python scripts, filtered to your `selected_panels.txt` panels only

---

## Workflow: Adding or Editing a Panel Set

1. **Clone an existing label set:**  
   Copy a directory under `LABELS/` (e.g., `LABEL_SET_MAIN`) to a new name, e.g., `LABEL_SET_MYCOCKPIT`.

2. **Edit `selected_panels.txt`:**  
   Uncomment or add panels from `panels.txt` to include only what you want for this build.

3. **(Optional) Edit or add panel logic:**  
   - Implement or update panel-specific .cpp/.h files (e.g., `IFEIPanel.cpp`, `MasterARMPanel.cpp`).  
   - Most panel-agnostic logic and mappings are managed by the auto-generated files.
   - **Add new entries to `Mappings.h/cpp`** as needed for new custom logic, using preprocessor logic to switch by label set.

4. **Run the auto-generator:**  
   - In your label set directory, run:  
     ```
     python3 generate_data.py
     ```
   - This will generate or update all mapping files for that label set.  
   - Never hand-edit these mapping files except for fields where the generator preserves manual edits (see comments).

5. **Select the label set:**  
   - In `Config.h`, set the correct `#define LABEL_SET_XXXX` to match your build.
   - Your firmware will automatically include the right mappings and code.

---

## Integration: Mappings.h/cpp

- `Mappings.h` and `Mappings.cpp` act as the glue between your auto-generated label set and your project source.
- All **panel-specific initialization, panel flags, and custom code** go here.
- Always update these files if you add a new label set or need to wire in new panels or special logic.
- Use preprocessor logic to switch between label sets (see examples in your code).

---

## The METADATA Directory (Advanced/Optional)

- Each label set can include a `METADATA` subdirectory containing JSON overlays.
- These are merged into the main panel/control definitions at generation time.
- Use this for **custom extensions, corrections, or overrides** without modifying the base aircraft JSON.

---

## Best Practices

- **Never** manually edit auto-generated files except in user-marked safe zones.
- Always manage custom logic in `Mappings.h/cpp` or dedicated panel .cpp/h files.
- Keep your `selected_panels.txt` tidy and in sync with what you actually want in your firmware.

---

## Naming and Conventions

- Label set directories must start with `LABEL_SET_`.
- Panel names should match those in `panels.txt` exactly (case and spaces sensitive).
- Custom label sets must be added to the `Mappings.h/cpp` conditional logic and defined in `Config.h`.

---

For more detail, study `Mappings.h`, `Mappings.cpp`, and the header comments in your Python generator scripts.

